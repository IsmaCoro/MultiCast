<!DOCTYPE html>
<html>
<head>
    <title>Usuarios con ImÃ¡genes</title>
    <style>
        .usuario {
            border: 1px solid #ccc;
            padding: 15px;
            margin: 10px;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .foto {
            max-width: 200px;
            max-height: 200px;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 5px;
        }
        .sin-foto {
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <h1>ðŸŽ“ Lista de Usuarios</h1>
    
    {% if usuarios %}
        {% for usuario in usuarios %}
        <div class="usuario">
            <h3>{{ usuario.nombre }} {{ usuario.apellidos }}</h3>
            <p><strong>ID:</strong> {{ usuario.id }}</p>
            <p><strong>CÃ³digo:</strong> {{ usuario.codigo_estudiante }}</p>
            <p><strong>CURP:</strong> {{ usuario.curp }}</p>
            <p><strong>DirecciÃ³n:</strong> {{ usuario.calle }}</p>
            <p><strong>Archivo de foto:</strong> {{ usuario.ruta_foto }}</p>
            
            {% if usuario.ruta_foto %}
                <img class="foto" 
                     src="{{ url_for('fotos', filename=usuario.ruta_foto) }}" 
                     alt="Foto de {{ usuario.nombre }}"
                     onerror="this.style.display='none'; console.log('Error cargando imagen: {{ usuario.ruta_foto }}')">
                <br>
                <small>
                    <a href="{{ url_for('fotos', filename=usuario.ruta_foto) }}" target="_blank">
                        Ver imagen completa
                    </a>
                </small>
            {% else %}
                <p class="sin-foto">Sin foto disponible</p>
            {% endif %}
        </div>
        {% endfor %}
    {% else %}
        <p>No hay usuarios registrados.</p>
    {% endif %}
</body>
</html>
